Intel® Open Source HD Graphics and Intel Iris™ Plus Graphics


Programmer's Reference Manual


For the 2016 - 2017 Intel Core™ Processors, Celeron™ Processors,
and Pentium™ Processors based on the "Kaby Lake" Platform

Volume 15: Scaler Format Converter (SFC)

January 2017, Revision 1.0
                                                                                                    SFC




Creative Commons License
You are free to Share - to copy, distribute, display, and perform the work under the following
conditions:

      Attribution. You must attribute the work in the manner specified by the author or licensor (but
       not in any way that suggests that they endorse you or your use of the work).
      No Derivative Works. You may not alter, transform, or build upon this work.

Notices and Disclaimers
INFORMATION IN THIS DOCUMENT IS PROVIDED IN CONNECTION WITH INTEL® PRODUCTS. NO
LICENSE, EXPRESS OR IMPLIED, BY ESTOPPEL OR OTHERWISE, TO ANY INTELLECTUAL PROPERTY RIGHTS
IS GRANTED BY THIS DOCUMENT. EXCEPT AS PROVIDED IN INTEL'S TERMS AND CONDITIONS OF SALE
FOR SUCH PRODUCTS, INTEL ASSUMES NO LIABILITY WHATSOEVER AND INTEL DISCLAIMS ANY
EXPRESS OR IMPLIED WARRANTY, RELATING TO SALE AND/OR USE OF INTEL PRODUCTS INCLUDING
LIABILITY OR WARRANTIES RELATING TO FITNESS FOR A PARTICULAR PURPOSE, MERCHANTABILITY, OR
INFRINGEMENT OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.
A "Mission Critical Application" is any application in which failure of the Intel Product could result,
directly or indirectly, in personal injury or death. SHOULD YOU PURCHASE OR USE INTEL'S PRODUCTS
FOR ANY SUCH MISSION CRITICAL APPLICATION, YOU SHALL INDEMNIFY AND HOLD INTEL AND ITS
SUBSIDIARIES, SUBCONTRACTORS AND AFFILIATES, AND THE DIRECTORS, OFFICERS, AND EMPLOYEES
OF EACH, HARMLESS AGAINST ALL CLAIMS COSTS, DAMAGES, AND EXPENSES AND REASONABLE
ATTORNEYS' FEES ARISING OUT OF, DIRECTLY OR INDIRECTLY, ANY CLAIM OF PRODUCT LIABILITY,
PERSONAL INJURY, OR DEATH ARISING IN ANY WAY OUT OF SUCH MISSION CRITICAL APPLICATION,
WHETHER OR NOT INTEL OR ITS SUBCONTRACTOR WAS NEGLIGENT IN THE DESIGN, MANUFACTURE,
OR WARNING OF THE INTEL PRODUCT OR ANY OF ITS PARTS.
Intel may make changes to specifications and product descriptions at any time, without notice. Designers
must not rely on the absence or characteristics of any features or instructions marked "reserved" or
"undefined". Intel reserves these for future definition and shall have no responsibility whatsoever for
conflicts or incompatibilities arising from future changes to them. The information here is subject to
change without notice. Do not finalize a design with this information.
The products described in this document may contain design defects or errors known as errata which
may cause the product to deviate from published specifications. Current characterized errata are
available on request.
Implementations of the I2C bus/protocol may require licenses from various entities, including Philips
Electronics N.V. and North American Philips Corporation.
Intel and the Intel logo are trademarks of Intel Corporation in the U.S. and other countries.
* Other names and brands may be claimed as the property of others.
Copyright © 2017, Intel Corporation. All rights reserved.



ii                                                                       Doc Ref # IHD-OS-KBL-Vol 15-1.17
 SFC




Table of Contents
SFC Overview ................................................................................................................................... 1
   Ultra Low-Power Usages ....................................................................................................................................... 1
SFC Commands Definition ............................................................................................................. 2




Doc Ref # IHD-OS-KBL-Vol 15-1.17                                                                                                                                      iii
SFC



SFC Overview
Scaler & Format Converter (SFC) pipeline is introduced as a multi-format scaling engine to accelerate
several media usages and achieve ultra low-power video playback.

Ultra Low-Power Usages
Several power saving techniques are brought into consideration and incorporated into the architecture
of SFC pipeline: offloading from EU to fixed function to reduce Cdyn power, memory traffic reduction to
lower IO and DDR power, and native surface support between acceleration engines.
Two ultra low–power playback modes are introduced to achieve sub 1-Watt solution: Decode->Scale->
Display (sprite) and Decode-> Image Enhancement-> Scale-> Display (sprite).




   In these two usages, SFC is fed by the decoder (VDBOX) and image enhancer (VEBOX) directly
    instead of writing to memory and read back from memory. A direct data bus is added between
    VD-to-SFC and VE-to-SFC. SFC will also include an internal store buffer to capture overlap pixel
    data between column/rows. In another word, the only IO traffic to DDR is the final scaled surface
    writes. All input and intermediate traffics related to SFC engine are confined inside GT and not
    expose to external components.
   EU-less usage: SFC is a fixed function engine architects to run concurrently along VDBOX or
    VEBOX. i.e. Decode and scaling will be happening at the same time, or Image enhancement and
    scaling will be occurring at the same time. It saves power by offloading the scaling workload off
    the media render engine to this dedicated engine which is much smaller.
   In both cases, scaling operation is the last processing step before final pixels are presented by the
    display engine. SFC is designed to generate output format native to display engine. This reduces
    the memory traffic caused by elimination of the extra memory copy used to convert the format
    incompatibility between engines. In addition, SFC supports 90 degree clockwise rotation of the
    final pixel surface for tablet space.




Doc Ref # IHD-OS-KBL-Vol 15-1.17                                                                        1
                                                                                                  SFC



     SFC pipeline is chained together with VDBOX and VEBOX with direct interface and ability to run
      concurrently. VDBOX/VEBOX sends control parameters and pixel data directly to SFC through
      direct interface. This help reduces the IO and package power by eliminating the traffic to memory,
      and allows VD/VE to run concurrently along with SFC pipeline. SFC pipeline is a shared resource
      that can be called and accessed by VDBOX or VEBOX. A lock must be placed and granted with an
      acknowledgement ahead of transferring data to SFC. On completion, the lock must be removed to
      free up the shared resource (SFC).

SFC Commands Definition
This section contains definitions for commands used with the scaler and format converter (SFC). These
commands are sent from the VDBOX/VEBOX to the SFC pipeline.
SFC_AVS_LUMA_Coeff_Table
SFC_AVS_CHROMA_Coeff_Table
SFC_AVS_STATE
SFC_FRAME_START
SFC_IEF_STATE
SFC_LOCK
SFC_STATE




2                                                                      Doc Ref # IHD-OS-KBL-Vol 15-1.17
